<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RCM Dashboard Navigator</title>
  <link rel="icon" type="image/png" sizes="48x48" href="favicon_48x48.png">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --main-blue: #1565C0;
      --secondary-blue: #2196F3;
      --blue-light: #b3d8ff;
      --blue-gradient: linear-gradient(135deg, #fafdff 0%, #e3f7ff 60%, #e6f2ff 100%);
      --card-gradient: linear-gradient(120deg, #e6f2ff 0%, #b3d8ff 65%, #fff 100%);
      --card-radius: 2.1em;
      --shadow: 0 8px 40px 0 rgba(33,150,243,0.10);
      --shadow-hover: 0 18px 60px 0 rgba(33,150,243,0.22);
      --header-radius: 2.5em;
    }
    html { box-sizing: border-box; font-size: 16px; }
    *, *:before, *:after { box-sizing: inherit; }

    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--blue-gradient);
      color: var(--main-blue);
      min-height: 100vh;
      transition: background 0.3s;
    }

    body, .main-content, .dashboards-container, .dashboard-grid, .dashboard-list-grid,
    .cat-card, .dashboard-item, .logo-bar, .logo-bar img, .header h1, .blue-line {
      transition: all 0.45s cubic-bezier(.4,2,.6,1);
    }

    .logo-bar {
      background: #fff;
      border-bottom: 2px solid #e0e7ef;
      box-shadow: 0 2px 16px 0 rgba(21,101,192,0.04);
      min-height: 7em;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1em 0;
    }
    .logo-bar img {
      height: 6em;
      object-fit: contain;
      max-width: 90vw;
    }

    .header {
      background: linear-gradient(90deg, #1565C0, #90CAF9 100%);
      border-bottom-left-radius: var(--header-radius);
      border-bottom-right-radius: var(--header-radius);
      box-shadow: 0 4px 18px 0 rgba(21,101,192,0.13);
      padding-bottom: .1em;
      text-align: center;
    }
    .header h1 {
      color: #fff;
      font-size: clamp(1.2rem, 4vw, 2.7rem);
      font-weight: bold;
      letter-spacing: .23em;
      margin: 0;
      padding: 1.2em 0 0.6em 0;
      word-break: break-word;
      line-height: 1.1;
    }
    .blue-line {
      background: #1565C0;
      height: .35em;
      border-radius: .2em;
      width: 80vw;
      margin: 0 auto 0.7em auto;
    }

    .main-content {
      width: 100%;
      max-width: 1800px;
      margin: 2vw auto;
      padding: 0 2vw;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
      gap: 2vw;
      width: 100%;
    }

    .cat-card {
      background: var(--card-gradient);
      border-radius: var(--card-radius);
      box-shadow: var(--shadow);
      padding: 2vw 1vw;
      display: flex;
      flex-direction: column;
      gap: 1.2em;
      min-width: 0;
      width: 100%;
      min-height: 180px;
      max-width: 100%;
      word-break: break-word;
      transition: box-shadow 0.2s, transform 0.2s;
    }
    .cat-card:hover {
      box-shadow: var(--shadow-hover);
      transform: scale(1.02);
      z-index: 2;
    }
    .cat-header {
      display: flex;
      align-items: center;
      gap: 0.9em;
      min-height: 2.5rem;
      flex-wrap: wrap;
      width: 100%;
    }
    .cat-icon-btn {
      background: transparent;
      border: none;
      border-radius: 1rem;
      padding: 0;
      cursor: pointer;
      transition: box-shadow 0.15s, background 0.12s;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 2.5rem;
      min-height: 2.5rem;
      flex-shrink: 0;
    }
    .cat-icon-btn:focus,
    .cat-icon-btn:hover {
      background: #eaf4ff;
      box-shadow: 0 2px 8px #1565c022;
      outline: none;
    }
    .cat-icon-emoji {
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2.2rem;
      height: 2.2rem;
      border: 2px solid #1976D2;
      border-radius: 0.5rem;
      background: #fff;
      text-align: center;
      margin: 2px;
      flex-shrink: 0;
    }
    .cat-title {
      font-size: clamp(1.1rem, 2.5vw, 1.6rem);
      font-weight: 700;
      color: var(--main-blue);
      background: #fafdff;
      border-radius: 0.7em;
      padding: 0.55em 1em;
      border: none;
      flex: 1 1 0;
      min-width: 0;
      word-break: break-word;
      letter-spacing: 0.5px;
      user-select: text;
      text-align: left;
      overflow-wrap: anywhere;
    }
    .cat-badge {
      width: 2.2rem;
      height: 2.2rem;
      background: var(--main-blue);
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1em;
      font-weight: bold;
      border: 2px solid #fff;
      margin-left: 0.7em;
      box-shadow: 0 1px 11px #b3d8ffb0;
      flex-shrink: 0;
    }
    .cat-dropdown-bar {
      background: #fafdff;
      border-radius: 1rem;
      margin-top: 0.6em;
      margin-bottom: 0.3em;
      padding: 0.8em 0.7em;
      display: flex;
      align-items: center;
      gap: 0.7em;
      width: 100%;
      min-height: 2.5rem;
      flex-wrap: wrap;
    }
    .cat-dropdown-bar select {
      font-size: 1em;
      color: var(--main-blue);
      border: 1.5px solid var(--main-blue);
      background: #fff;
      padding: 0.5em 1em;
      border-radius: 0.5em;
      flex: 1 1 0;
      min-width: 0;
      outline: none;
      appearance: none;
      height: 2.3em;
      box-sizing: border-box;
      word-break: break-word;
      overflow-wrap: anywhere;
    }
    .cat-dropdown-bar button {
      background: var(--main-blue);
      color: #fff;
      border-radius: 0.7em;
      font-size: 1em;
      font-weight: bold;
      padding: 0.7em 1.7em 0.7em 1.2em;
      border: none;
      height: 2.3em;
      min-width: 90px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.6em;
      box-sizing: border-box;
      box-shadow: 0 2px 6px #b3d8ff;
      transition: background 0.15s;
      word-break: break-word;
    }
    .cat-dropdown-bar button:hover {
      background: var(--secondary-blue);
    }
    .cat-dropdown-bar .arrow {
      font-size: 1.2em;
      color: var(--secondary-blue);
      margin-right: 6px;
      pointer-events: none;
    }

    .dashboards-container {
      background: #fff;
      border-radius: 2.2rem;
      box-shadow: 0 8px 38px 0 rgba(33, 150, 243, 0.13);
      margin-top: 2vw;
      margin-bottom: 2vw;
      padding: 2.5vw 2vw;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      box-sizing: border-box;
    }
    .dashboards-header {
      display: flex;
      align-items: center;
      gap: 1em;
      margin-bottom: 2vw;
      flex-wrap: wrap;
      width: 100%;
    }
    .dashboards-title {
      font-size: clamp(1.1rem, 2.3vw, 2.2em);
      font-weight: 700;
      color: var(--main-blue);
      background: #eaf4ff;
      border-radius: 1.1em;
      padding: 1em 2em;
      border: none;
      flex: 1 1 0;
      min-width: 0;
      word-break: break-word;
      text-align: left;
      overflow-wrap: anywhere;
    }
    .back-btn {
      background: #ececec;
      border-radius: 1em;
      color: var(--main-blue);
      font-weight: bold;
      font-size: 1em;
      border: none;
      padding: 0.9em 2.2em;
      cursor: pointer;
      transition: background 0.15s;
      min-width: 90px;
      flex-shrink: 0;
    }
    .back-btn:hover {
      background: #d4e4f2;
    }
    .dashboard-list-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(min(180px,100%), 1fr));
      gap: 1.2vw;
      width: 100%;
    }
    .dashboard-item {
      background: var(--card-gradient);
      border-radius: 1rem;
      box-shadow: var(--shadow);
      padding: 1vw 1vw;
      min-width: 0;
      max-width: 100%;
      width: 100%;
      word-break: break-word;
      box-sizing: border-box;
      transition: box-shadow 0.18s, transform 0.18s;
      flex: 1 1 auto;
    }
    .dashboard-item:hover {
      box-shadow: 0 18px 44px 0 rgba(33,150,243,0.18);
      transform: scale(1.04);
      z-index: 2;
    }
    .dashboard-item-header {
      display: flex;
      align-items: center;
      gap: 1em;
      flex-wrap: wrap;
      width: 100%;
    }
    .dashboard-item-num {
      color: #fff;
      background: var(--secondary-blue);
      border-radius: 0.5em;
      padding: 0.2em 0.8em;
      font-weight: bold;
      font-size: 1em;
      flex-shrink: 0;
    }
    .dashboard-item-title {
      color: var(--main-blue);
      background: #fafdff;
      border-radius: 0.55em;
      border: none;
      padding: 0.5em 1em;
      font-weight: 600;
      font-size: 1em;
      flex: 1 1 0;
      min-width: 0;
      word-break: break-word;
      text-align: left;
      overflow-wrap: anywhere;
    }
    .dashboard-item-actions {
      display: flex;
      gap: 0.7em;
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
    }
    .dashboard-item-actions button {
      border: none;
      border-radius: 0.5em;
      padding: 0.7em 1.4em;
      font-size: 1em;
      font-weight: bold;
      background: var(--main-blue);
      color: #fff;
      box-shadow: 0 2px 6px #b3d8ff;
      cursor: pointer;
      transition: background 0.13s;
      display: flex;
      align-items: center;
      gap: 0.6em;
      word-break: break-word;
    }
    .dashboard-item-actions button.copy-btn {
      background: #90CAF9;
      color: #fff;
      box-shadow: 0 2px 6px #eaf4ff;
    }
    .dashboard-item-actions button:hover {
      background: var(--secondary-blue);
    }
    .dashboard-item-actions button.copy-btn:hover {
      background: #1976D2;
    }

    /* Responsive: tablet, mobile, TV, ultra-wide */
    @media (max-width: 1100px) {
      .main-content { max-width: 99vw; }
      .dashboard-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
      .dashboard-list-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
    }
    @media (max-width: 700px), (pointer:coarse) {
      .main-content { padding: 0 1vw; }
      .dashboards-container { padding: 8px 0.5vw 10px 0.5vw; }
      .dashboard-grid, .dashboard-list-grid { gap: 0.7rem; grid-template-columns: 1fr; }
      .cat-card, .dashboard-item { padding: 0.5em 0.5em; min-width: 0; max-width: 100%; }
      .logo-bar { min-height: 2.5rem; padding: 0.2em 0; }
      .logo-bar img { height: 2rem; }
      .header h1 { font-size: 1.12rem; padding: 0.5em 0 0.25em 0; }
      .blue-line { height: 2px; width: 96vw; }
    }

    /* Desktop View Override: applies even on mobile if .desktop-view on body */
    body.desktop-view .main-content { padding: 2vw !important; }
    body.desktop-view .dashboards-container { padding: 2.5vw 2vw !important; }
    body.desktop-view .dashboard-grid,
    body.desktop-view .dashboard-list-grid { gap: 2vw !important; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)) !important; }
    body.desktop-view .cat-card,
    body.desktop-view .dashboard-item { padding: 2vw 1vw !important; }
    body.desktop-view .logo-bar { min-height: 7em !important; padding: 1em 0 !important; }
    body.desktop-view .logo-bar img { height: 6em !important; }
    body.desktop-view .header h1 { font-size: clamp(1.2rem, 4vw, 2.7rem) !important; padding: 1.2em 0 0.6em 0 !important; }
    body.desktop-view .blue-line { height: .35em !important; width: 80vw !important; }

    /* زر التبديل (icon) */
    .view-toggle-btn {
      background: #1976D2;
      color: #fff;
      border: none;
      border-radius: 0.7em;
      padding: 0.55em 1em;
      font-size: 1.7em;
      cursor: pointer;
      box-shadow: 0 2px 6px #b3d8ff;
      margin: 0.7em 2vw 0 0;
      outline: none;
      transition: background .18s, box-shadow .23s, transform .22s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 55px;
      min-height: 46px;
    }
    .view-toggle-btn:hover, .view-toggle-btn:focus {
      background: #2196F3;
      box-shadow: 0 6px 14px #90caf9c7;
      transform: scale(1.08);
    }
    .view-toggle-btn .icon-label {
      font-size: .65em;
      margin-right: 0.45em;
      color: #fff;
      font-weight: bold;
      user-select: none;
      display: none;
    }
    @media (min-width: 700px) {
      .view-toggle-btn { font-size: 1.6em; }
    }
  </style>
</head>
<body>
  <div class="logo-bar">
    <img src="https://campaignme.com/wp-content/uploads/2021/02/SG-Health_Brandmark-Artwork_Bilingual_STACK_CMYK.jpg" alt="Logo" />
  </div>
  <!-- زر التبديل بين الموبايل والديسكتوب كأيقونة -->
  <div style="text-align:right;">
    <button id="toggle-desktop-view" class="view-toggle-btn" title="Toggle view mode">
      <span id="toggle-icon" aria-hidden="true">🖥️</span>
      <!-- لو تحب إضافة لابل نصي بجانب الأيقونة، أزل display:none عن .icon-label -->
      <!-- <span class="icon-label">ديسكتوب</span> -->
    </button>
  </div>
  <div class="header">
    <h1>RCM Dashboard Navigator</h1>
    <div class="blue-line"></div>
  </div>
  <div class="main-content" id="main-content"></div>
  <script>
    // زر تبديل الوضع
    const toggleBtn = document.getElementById('toggle-desktop-view');
    const toggleIcon = document.getElementById('toggle-icon');
    // يبدأ بوضع الديسكتوب
    let isDesktop = true;
    function updateToggleBtn() {
      if(document.body.classList.contains('desktop-view')) {
        toggleIcon.textContent = "📱"; // أيقونة موبايل
        toggleBtn.title = "تفعيل وضع الموبايل";
      } else {
        toggleIcon.textContent = "🖥️"; // أيقونة ديسكتوب
        toggleBtn.title = "تفعيل وضع الديسكتوب";
      }
    }
    toggleBtn.onclick = function() {
      document.body.classList.toggle('desktop-view');
      updateToggleBtn();
      toggleBtn.style.transform = "scale(1.12)";
      setTimeout(()=>toggleBtn.style.transform="", 180);
    };
    // تفعيل الوضع الديسكتوب من البداية (للديسكتوب)
    function autoInitialView() {
      if(window.innerWidth > 700) document.body.classList.remove('desktop-view');
      else document.body.classList.add('desktop-view');
      updateToggleBtn();
    }
    autoInitialView();
    window.addEventListener('resize', autoInitialView);

    // Dashboard Data ... (الكود الأصلي كما هو)
    // ... يمكنك لصق الكود الخاص بلوحة البيانات هنا كما في ملفك القديم (لم أغير شيء فيه)
    // للحفاظ على قصر الكود هنا (لأن الكود طويل جدًا)، فقط انسخ من ملفك الكود الخاص بلوحة البيانات وستعمل كل الخصائص بالضبط.
    // لكن لو أردت كل الكود بلوحة البيانات مدمج أرسله لك كامل!

    // ... بداية الكود الأصلي لعرض اللوحات:
    const dashboard_links = {
      /* ... كل الروابط كما في كودك ... */
      "OP_Preauthorization_DashBoard": "https://app.powerbi.com/links/CsnxY4GpAr?ctid=1e5702d3-1562-4ace-bce5-022687da9dc5&pbi_source=linkShare&bookmarkGuid=b501072d-cdfa-4954-baa2-10ca28319418",
      /* ... باقي الروابط ... */
      "Medications List VS SBS":"https://app.powerbi.com/links/V5l14LsKJe?ctid=1e5702d3-1562-4ace-bce5-022687da9dc5&pbi_source=linkShare"
    };
    const categories = {
      "Pricing & Profiling": [
        "Agreed_Pricelists_DashBoard",
        "HomeCare_DashBoard",
        "Policy_Monitoring_DashBoard",
        "SBS_Mapping_Validation_DashBoard",
        "SBS_Mapping_Module",
        "SGH_Contracts_DashBoard",
        "Tariff_Information_Reports",
        "Price Impact",
        "New Service Addition",
        "BUPA Price Impact"
      ],
      "Approvals": [
        "OP_Preauthorization_DashBoard",
        "Medications Referred Out SGH",
        "IP_Preauthorization_DashBoard",
        "Medications List VS SBS"
      ],
      "Market Research":[
        "JAHA",
        "Bupa 2",
        "Bupa Price list Lite",
        "Hospitals Hub"
      ],
      "Claims & Resubmission": [
        "E-Claim_Validation_DashBoard",
        "Naphies_DashBoard",
        "Direct_Account_Dashboard",
        "MOH_Rejection",
        "Tracking_sheet_For_Submission_And_Confirmation_Online–Live",
        "Adjustment Details"
      ],
      "Medical":[
        "VBHC 2024",
        "Medication Analysis",
        "RVU Analysis"
      ],
      "Audit": ["Audit Compliance Dashboard"],
      "Reconciliation & Collection": [
        "Collection_Vs_Billing",
        "Reconciliation_Status",
        "Collection_Vs_Budget",
        "Billing_Monthly_Status",
        "Doctor_Fees_Dashboard"
      ],
      "RCM": [
        "Growth_Analysis_DashBoard",
        "RCM_Manpower_DashBoard",
        "RCM_Team_KPIs_DashBoard",
        "Staff_Policy_Consumption_DashBoard",
        "Eclaim V.20 All Data",
        "Monthly_Report_DashBoard",
        "Policy Contribution",
        "Doctors Utilization",
        "SGH Slots"
      ]
    };

    function renderCategories() {
      // Sort categories by number of dashboards (descending)
      const sortedCats = Object.entries(categories).sort((a, b) => b[1].length - a[1].length);
      main_content.innerHTML = `
        <div class="dashboard-grid">
          ${sortedCats.map(([cat, dashboards], i) => `
            <div class="cat-card">
              <div class="cat-header">
                <button class="cat-icon-btn" title="Show Dashboards" onclick="showDashboards('${cat.replace(/'/g,"\\'")}'); event.stopPropagation();">
                  <span class="cat-icon-emoji">📊</span>
                </button>
                <div class="cat-title">${cat.replace(/&/g, '&amp;').replace(/_/g, ' & ')}</div>
                <div class="cat-badge">${dashboards.length}</div>
              </div>
              <div class="cat-dropdown-bar">
                <select>
                  ${dashboards.map(d => `<option value="${d}">${d.replace(/_/g, ' ')}</option>`).join('')}
                </select>
                <span class="arrow">&#x25BC;</span>
                <button onclick="openDashboardLink(this)">
                  Navigate <span style="font-size:1.15em;">&#8594;</span>
                </button>
              </div>
            </div>
          `).join('')}
        </div>
      `;
    }

    function showDashboards(cat) {
      const dashboards = categories[cat];
      main_content.innerHTML = `
        <div class="dashboards-container">
          <div class="dashboards-header">
            <div class="dashboards-title">${cat.replace(/&/g, '&amp;').replace(/_/g, ' & ')}</div>
            <button class="back-btn" onclick="renderCategories()">← Back</button>
          </div>
          <div class="dashboard-list-grid">
            ${dashboards.map((name, i) => `
              <div class="dashboard-item" title="Click to open dashboard" onclick="window.open('${dashboard_links[name]}','_blank')">
                <div class="dashboard-item-header">
                  <span class="dashboard-item-num">${i+1}.</span>
                  <span class="dashboard-item-title">${name.replace(/_/g, ' ')}</span>
                </div>
                <div class="dashboard-item-actions">
                  <button onclick="event.stopPropagation();window.open('${dashboard_links[name]}','_blank')">
                    Open <span style="font-size:1.12em">&#8599;</span>
                  </button>
                  <button class="copy-btn" onclick="event.stopPropagation();copyToClipboard('${dashboard_links[name]}')">
                    Copy <span style="font-size:1.12em">&#128203;</span>
                  </button>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function openDashboardLink(btn) {
      const select = btn.parentElement.querySelector('select');
      const dash = select.value;
      window.open(dashboard_links[dash], '_blank');
    }
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text);
      alert('Link copied to clipboard!');
    }
    const main_content = document.getElementById('main-content');
    renderCategories();
  </script>
</body>
</html>
